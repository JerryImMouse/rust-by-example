# Arc

Когда требуется распределять владение между потоками, можно использовать `Arc` (Atomically Reference Counted, атомарный подсчет ссылок). Эта структура с помощью реализации `Clone` может создать указатель на значение в куче, увеличив счетчик ссылок. Поскольку она разделяет владение между потоками, когда последний указатель ссылки на значение выходит за пределы области видимости, переменная удаляется.

```rust,editable
use std::time::Duration;
use std::sync::Arc;
use std::thread;

fn main() {
    // Это определение переменной, где указывается её значение.
    let apple = Arc::new("the same apple");

    for _ in 0..10 {
        // Здесь значение уже не указывается, т.к. это указатель
        // на ссылку в куче.
        let apple = Arc::clone(&apple);

        thread::spawn(move || {
            // Так как мы использовали Arc, мы можем породить потоки со значением, находящимся
            // в ячейке памяти, на которую ссылается указатель на переменную, размещённый внутри Arc.
            println!("{:?}", apple);
        });
    }

    // Убедимся, что все экземпляры Arc печатаются из порождённых потоков.
    thread::sleep(Duration::from_secs(1));
}
```
